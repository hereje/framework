version: 1
applications:
    - appRoot: common/docs/
      frontend:
          phases:
            preBuild:
              commands:
                - npm install -g pnpm
                - echo -e "@fortawesome:registry=https://npm.fontawesome.com/\n//npm.fontawesome.com/:_authToken=$FONTAWESOME_AUTH_TOKEN" > .npmrc
                - pnpm install --shamefully-hoist
            build:
              commands:
                - npm run docs:build
          artifacts:
            baseDirectory: .vuepress/dist
            files:
              - '**/*'
          cache:
            paths:
              - node_modules/**/*
