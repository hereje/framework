#!/usr/bin/env bash
set -e
. "$JL_WORKDIR/common"

cli_help() {
  echo "
Command: stop

Use: Stops working on this project, it will stop all development services.

Options:

Example: JL stop
"
exit 1
}


 #####STOP
   # 1. Add comment to github issue
   # 2. Move the project ticket back to the backlog
   # 3. move back to main branch and pull
   # 4. Stop docker containers


	if [ "$JL_ISSUE" ]; then

  		cli_log "Stopped working on #${JL_ISSUE}"
	    USER_NAME=$(git config user.name)
	    GIT_COMMENT="ðŸ¦™ $USER_NAME has stopped working on this issue."
	    gh issue comment "$JL_ISSUE" --body "$GIT_COMMENT"

		git checkout main
		git pull

		cli_log_error "TODO: Move the project ticket back to the backlog"=
	fi

	if [ $JL_DOCKER -eq 1 ]; then
        cli_log "Stopping docker"
        docker container stop $(docker ps -a -q --filter="name=$PROJECT_NAME-*")
    fi

    stop_services